{"version":3,"file":"neovis-without-dependencies.js","mappings":"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","sources":["webpack://NeoVis/webpack/universalModuleDefinition","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/array/is-array\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/array/is-array\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/array/is-array\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/concat\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/concat\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/concat\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/flat-map\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/flat-map\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/flat-map\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/for-each\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/for-each\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/keys\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/keys\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/keys\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/map\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/map\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/map\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/reduce\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/reduce\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/reduce\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/object/entries\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/object/entries\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/object/entries\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/object/keys\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/object/keys\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/object/keys\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/promise\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/promise\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/promise\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/set-timeout\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/set-timeout\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/set-timeout\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/symbol\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/symbol\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/symbol\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/weak-map\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/weak-map\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/weak-map\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/weak-set\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/weak-set\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/weak-set\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/helpers/classPrivateFieldGet\",\"commonjs2\":\"@babel/runtime-corejs3/helpers/classPrivateFieldGet\",\"amd\":\"@babel/runtime-corejs3/helpers/classPrivateFieldGet\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/helpers/classPrivateFieldSet\",\"commonjs2\":\"@babel/runtime-corejs3/helpers/classPrivateFieldSet\",\"amd\":\"@babel/runtime-corejs3/helpers/classPrivateFieldSet\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/helpers/defineProperty\",\"commonjs2\":\"@babel/runtime-corejs3/helpers/defineProperty\",\"amd\":\"@babel/runtime-corejs3/helpers/defineProperty\"}","webpack://NeoVis/external umd {\"commonjs\":\"deepmerge\",\"commonjs2\":\"deepmerge\",\"amd\":\"deepmerge\"}","webpack://NeoVis/external umd {\"commonjs\":\"neo4j-driver\",\"commonjs2\":\"neo4j-driver\",\"amd\":\"neo4j-driver\"}","webpack://NeoVis/external umd {\"commonjs\":\"neo4j-driver-core\",\"commonjs2\":\"neo4j-driver-core\",\"amd\":\"neo4j-driver-core\"}","webpack://NeoVis/external umd {\"commonjs\":\"vis-network/standalone\",\"commonjs2\":\"vis-network/standalone\",\"amd\":\"vis-network/standalone\"}","webpack://NeoVis/webpack/bootstrap","webpack://NeoVis/webpack/runtime/compat get default export","webpack://NeoVis/webpack/runtime/define property getters","webpack://NeoVis/webpack/runtime/hasOwnProperty shorthand","webpack://NeoVis/webpack/runtime/make namespace object","webpack://NeoVis/./src/defaults.ts","webpack://NeoVis/./src/events.ts","webpack://NeoVis/./src/types.ts","webpack://NeoVis/./src/neovis.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@babel/runtime-corejs3/helpers/defineProperty\"), require(\"@babel/runtime-corejs3/helpers/classPrivateFieldSet\"), require(\"@babel/runtime-corejs3/helpers/classPrivateFieldGet\"), require(\"@babel/runtime-corejs3/core-js-stable/object/keys\"), require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/keys\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/reduce\"), require(\"@babel/runtime-corejs3/core-js-stable/object/entries\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/flat-map\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"), require(\"@babel/runtime-corejs3/core-js-stable/weak-map\"), require(\"@babel/runtime-corejs3/core-js-stable/weak-set\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"), require(\"@babel/runtime-corejs3/core-js-stable/promise\"), require(\"@babel/runtime-corejs3/core-js-stable/set-timeout\"), require(\"neo4j-driver\"), require(\"neo4j-driver-core\"), require(\"vis-network/standalone\"), require(\"deepmerge\"), require(\"@babel/runtime-corejs3/core-js-stable/symbol\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@babel/runtime-corejs3/helpers/defineProperty\", \"@babel/runtime-corejs3/helpers/classPrivateFieldSet\", \"@babel/runtime-corejs3/helpers/classPrivateFieldGet\", \"@babel/runtime-corejs3/core-js-stable/object/keys\", \"@babel/runtime-corejs3/core-js-stable/array/is-array\", \"@babel/runtime-corejs3/core-js-stable/instance/map\", \"@babel/runtime-corejs3/core-js-stable/instance/keys\", \"@babel/runtime-corejs3/core-js-stable/instance/reduce\", \"@babel/runtime-corejs3/core-js-stable/object/entries\", \"@babel/runtime-corejs3/core-js-stable/instance/flat-map\", \"@babel/runtime-corejs3/core-js-stable/instance/concat\", \"@babel/runtime-corejs3/core-js-stable/weak-map\", \"@babel/runtime-corejs3/core-js-stable/weak-set\", \"@babel/runtime-corejs3/core-js-stable/instance/for-each\", \"@babel/runtime-corejs3/core-js-stable/promise\", \"@babel/runtime-corejs3/core-js-stable/set-timeout\", \"neo4j-driver\", \"neo4j-driver-core\", \"vis-network/standalone\", \"deepmerge\", \"@babel/runtime-corejs3/core-js-stable/symbol\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"NeoVis\"] = factory(require(\"@babel/runtime-corejs3/helpers/defineProperty\"), require(\"@babel/runtime-corejs3/helpers/classPrivateFieldSet\"), require(\"@babel/runtime-corejs3/helpers/classPrivateFieldGet\"), require(\"@babel/runtime-corejs3/core-js-stable/object/keys\"), require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/keys\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/reduce\"), require(\"@babel/runtime-corejs3/core-js-stable/object/entries\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/flat-map\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"), require(\"@babel/runtime-corejs3/core-js-stable/weak-map\"), require(\"@babel/runtime-corejs3/core-js-stable/weak-set\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"), require(\"@babel/runtime-corejs3/core-js-stable/promise\"), require(\"@babel/runtime-corejs3/core-js-stable/set-timeout\"), require(\"neo4j-driver\"), require(\"neo4j-driver-core\"), require(\"vis-network/standalone\"), require(\"deepmerge\"), require(\"@babel/runtime-corejs3/core-js-stable/symbol\"));\n\telse\n\t\troot[\"NeoVis\"] = factory(root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__783__, __WEBPACK_EXTERNAL_MODULE__642__, __WEBPACK_EXTERNAL_MODULE__779__, __WEBPACK_EXTERNAL_MODULE__995__, __WEBPACK_EXTERNAL_MODULE__852__, __WEBPACK_EXTERNAL_MODULE__820__, __WEBPACK_EXTERNAL_MODULE__270__, __WEBPACK_EXTERNAL_MODULE__83__, __WEBPACK_EXTERNAL_MODULE__209__, __WEBPACK_EXTERNAL_MODULE__321__, __WEBPACK_EXTERNAL_MODULE__848__, __WEBPACK_EXTERNAL_MODULE__317__, __WEBPACK_EXTERNAL_MODULE__483__, __WEBPACK_EXTERNAL_MODULE__349__, __WEBPACK_EXTERNAL_MODULE__723__, __WEBPACK_EXTERNAL_MODULE__519__, __WEBPACK_EXTERNAL_MODULE__949__, __WEBPACK_EXTERNAL_MODULE__55__, __WEBPACK_EXTERNAL_MODULE__365__, __WEBPACK_EXTERNAL_MODULE__613__, __WEBPACK_EXTERNAL_MODULE__581__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__852__;","module.exports = __WEBPACK_EXTERNAL_MODULE__848__;","module.exports = __WEBPACK_EXTERNAL_MODULE__321__;","module.exports = __WEBPACK_EXTERNAL_MODULE__349__;","module.exports = __WEBPACK_EXTERNAL_MODULE__270__;","module.exports = __WEBPACK_EXTERNAL_MODULE__820__;","module.exports = __WEBPACK_EXTERNAL_MODULE__83__;","module.exports = __WEBPACK_EXTERNAL_MODULE__209__;","module.exports = __WEBPACK_EXTERNAL_MODULE__995__;","module.exports = __WEBPACK_EXTERNAL_MODULE__723__;","module.exports = __WEBPACK_EXTERNAL_MODULE__519__;","module.exports = __WEBPACK_EXTERNAL_MODULE__581__;","module.exports = __WEBPACK_EXTERNAL_MODULE__317__;","module.exports = __WEBPACK_EXTERNAL_MODULE__483__;","module.exports = __WEBPACK_EXTERNAL_MODULE__779__;","module.exports = __WEBPACK_EXTERNAL_MODULE__642__;","module.exports = __WEBPACK_EXTERNAL_MODULE__783__;","module.exports = __WEBPACK_EXTERNAL_MODULE__613__;","module.exports = __WEBPACK_EXTERNAL_MODULE__949__;","module.exports = __WEBPACK_EXTERNAL_MODULE__55__;","module.exports = __WEBPACK_EXTERNAL_MODULE__365__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const defaults = {\n\n\tneo4j: {\n\t\tinitialQuery: `MATCH (n) WHERE exists(n.pagerank)\n                        WITH (n), RAND() AS random\n                        ORDER BY random LIMIT 3000\n                        OPTIONAL MATCH (n)-[r]-(m)\n                        //WITH n,r,m WHERE exists(n.pagerank) AND exists(m.pagerank) AND exists(m.community)\n                        RETURN n, r, m;`,\n\t\tneo4jUri: 'bolt://localhost:7687',\n\t\tneo4jUser: 'neo4j',\n\t\tneo4jPassword: 'neo4j',\n\t\tdriverConfig: {\n\t\t\tencrypted: 'ENCRYPTION_OFF',\n\t\t\ttrust: 'TRUST_ALL_CERTIFICATES',\n\t\t\tmaxConnectionPoolSize: 100,\n\t\t\tconnectionAcquisitionTimeout: 10000,\n\t\t\tdisableLosslessIntegers: true,\n\t\t},\n\t\tgroupAsLabel: true\n\t},\n\n\tvisJs: {\n\t\tnodes: {\n\t\t\tfont: {\n\t\t\t\tsize: 26,\n\t\t\t\tstrokeWidth: 7\n\t\t\t},\n\t\t\tscaling: {}\n\t\t},\n\t\tedges: {\n\t\t\tarrows: {\n\t\t\t\tto: { enabled: false }\n\t\t\t},\n\t\t\tlength: 200\n\t\t},\n\t\tlayout: {\n\t\t\timprovedLayout: false,\n\t\t\thierarchical: {\n\t\t\t\tenabled: false,\n\t\t\t\tsortMethod: 'hubsize'\n\t\t\t}\n\t\t},\n\t\tphysics: { // TODO: adaptive physics settings based on size of graph rendered\n\t\t\t// enabled: true,\n\t\t\t// timestep: 0.5,\n\t\t\t// stabilization: {\n\t\t\t//     iterations: 10\n\t\t\t// }\n\n\t\t\tadaptiveTimestep: true,\n\t\t\t// barnesHut: {\n\t\t\t//     gravitationalConstant: -8000,\n\t\t\t//     springConstant: 0.04,\n\t\t\t//     springLength: 95\n\t\t\t// },\n\t\t\tstabilization: {\n\t\t\t\titerations: 200,\n\t\t\t\tfit: true\n\t\t\t}\n\t\t}\n\t}\n};\n\nexport { defaults };","import { Edge, Node } from './types';\n\nexport enum NeoVisEvents {\n\tCompletionEvent = 'completed',\n\tClickNodeEvent = 'clickNode',\n\tClickEdgeEvent = 'clickEdge',\n\tErrorEvent = 'error'\n}\n\nexport interface EventFunctionTypes {\n\t[NeoVisEvents.CompletionEvent]: (event: { recordCount: number }) => void;\n\t[NeoVisEvents.ClickNodeEvent]: (event: { nodeId: number, node: Node }) => void;\n\t[NeoVisEvents.ClickEdgeEvent]: (event: { edgeId: number, edge: Edge }) => void;\n\t[NeoVisEvents.ErrorEvent]: (event: { error: Error }) => void;\n}\n\nexport class EventController {\n\tprivate readonly _handlers: { [p: string]: Function[] };\n\n\tconstructor() {\n\t\tthis._handlers = {\n\t\t\t[NeoVisEvents.CompletionEvent]: [],\n\t\t\t[NeoVisEvents.ErrorEvent]: [],\n\t\t\t[NeoVisEvents.ClickNodeEvent]: [],\n\t\t\t[NeoVisEvents.ClickEdgeEvent]: [],\n\t\t};\n\t}\n\n\t/**\n\t *\n\t * @param eventType - Type of the event to be handled\n\t * @param handler - Handler to manage the event\n\t */\n\tregister<T extends NeoVisEvents>(eventType: T, handler: EventFunctionTypes[T]): void {\n\t\tif (this._handlers[eventType] === undefined) {\n\t\t\tthrow new Error('Unknown event: ' + eventType);\n\t\t}\n\n\t\tthis._handlers[eventType].push(handler);\n\t}\n\n\t/**\n\t *\n\t * @param {string} eventType - Type of the event generated\n\t * @param {any} values - Values associated to the event\n\t */\n\tgenerateEvent<T extends NeoVisEvents>(eventType: T, values: Parameters<EventFunctionTypes[T]>[0]): void {\n\t\tif (this._handlers[eventType] === undefined) {\n\t\t\tthrow new Error('Unknown event: ' + eventType);\n\t\t}\n\n\t\tfor (const handler of this._handlers[eventType]) {\n\t\t\thandler(values);\n\t\t}\n\t}\n}\n","import type * as Neo4jTypes from 'neo4j-driver';\nimport { type NumberOrInteger } from 'neo4j-driver-core';\nimport type * as VisNetwork from 'vis-network';\n\n\nexport const NEOVIS_DEFAULT_CONFIG = Symbol();\nexport const NEOVIS_ADVANCED_CONFIG = Symbol();\n\nexport type RecursiveMapToDist<T, New> = T extends object ? RecursiveMapTo<T, New> : New\nexport type DataFunctionType = (any?: unknown) => AsyncIterable<Neo4jTypes.Record> | Promise<Iterable<Neo4jTypes.Record>> | Iterable<Neo4jTypes.Record>;\n\n/**\n * Maps a type recursively and replace each non object type with the new type\n * @param <T> type to map\n * @param <New> type to map to for each non object type\n */\nexport type RecursiveMapTo<T, New> = { [P in keyof T]: RecursiveMapToDist<T[P], New> }\n\nexport type RecursiveMapToFunctionDist<T, PARAM_TYPE> = T extends object ? ((param: PARAM_TYPE) => T) | (RecursiveMapToFunction<T, PARAM_TYPE>) : (param: PARAM_TYPE) => T\n/**\n * Maps a type recursively and adds the ability for each object property to be a function that returns the same type\n * but replace each non object type with a function that returns the same type\n * @param <T> type to map\n * @param <PARAM_TYPE> type of parameter the functions get\n */\nexport type RecursiveMapToFunction<T, PARAM_TYPE> = {\n\t[P in keyof T]: RecursiveMapToFunctionDist<T[P], PARAM_TYPE>\n};\n\n/**\n * Cypher quarry\n */\nexport type Cypher = string;\n\nexport interface NeoVisAdvanceConfig<VIS_TYPE, NEO_TYPE> {\n\t/**\n\t * Static values that will the same for every node/relationship\n\t * */\n\tstatic?: VIS_TYPE;\n\t/**\n\t * Cypher that will be called for every object (will look the same as\n\t */\n\tcypher?: RecursiveMapTo<VIS_TYPE, Cypher>;\n\tfunction?: RecursiveMapToFunction<VIS_TYPE, NEO_TYPE>;\n}\n\nexport interface NonFlatNeoVisAdvanceConfig<VIS_TYPE, NEO_TYPE> extends NeoVisAdvanceConfig<VIS_TYPE, NEO_TYPE> {\n\tproperty?: RecursiveMapTo<VIS_TYPE, string>;\n}\n\nexport type NeovisDataConfig<VIS_TYPE, NEO_TYPE> =\n\tRecursiveMapTo<VIS_TYPE, string>\n\t& { [NEOVIS_ADVANCED_CONFIG]?: NeoVisAdvanceConfig<VIS_TYPE, NEO_TYPE> };\n\n/**\n * A mapper between neo4j node properties names to vis-network node config\n * @link https://visjs.github.io/vis-network/docs/network/nodes.html\n */\nexport interface LabelConfig extends RecursiveMapTo<VisNetwork.Node, string> {\n\t/**\n\t * advance options which allow for:\n\t * mapping static options to each node\n\t * mapping cypher to run for each node to determine vis-network node option\n\t * mapping function that gets the neo4j node and returns vis-network node option\n\t */\n\t[NEOVIS_ADVANCED_CONFIG]?: NeoVisAdvanceConfig<VisNetwork.Node, Neo4jTypes.Node<number>>;\n}\n\n/**\n * A mapper between neo4j relationship properties names to vis-network edge config\n * @link https://visjs.github.io/vis-network/docs/network/edges.html\n */\nexport interface RelationshipConfig extends RecursiveMapTo<VisNetwork.Edge, string> {\n\t/**\n\t * advance options which allow for:\n\t * mapping static options to each edge\n\t * mapping cypher to run for each relationship to determine vis-network edge option\n\t * mapping function that gets the neo4j relationship and returns vis-network edge option\n\t */\n\t[NEOVIS_ADVANCED_CONFIG]?: NeoVisAdvanceConfig<VisNetwork.Edge, Neo4jTypes.Relationship<number>>;\n}\n\nexport interface Neo4jConfig {\n\t/**\n\t * neo4j server\n\t * @example bolt://localhost:7687\n\t */\n\tserverUrl?: string;\n\tserverUser?: string;\n\tserverPassword?: string;\n\t/**\n\t * @link https://neo4j.com/docs/api/javascript-driver/current/function/index.html#configuration\n\t */\n\tdriverConfig?: Neo4jTypes.Config;\n}\n\nexport interface BaseNeovisConfig {\n\t/**\n\t * Html id of the element you want Neovis to render on\n\t */\n\tcontainerId: string;\n\t/**\n\t * database name you want to connect to\n\t * @default neo4j\n\t */\n\tserverDatabase?: string;\n\t/**\n\t * Neo4j Driver instance or configuration to make one\n\t */\n\tneo4j?: Neo4jTypes.Driver | Neo4jConfig;\n\t/**\n\t * Vis network config to override neovis defaults\n\t * @link https://visjs.github.io/vis-network/docs/network/#options\n\t */\n\tvisConfig?: VisNetwork.Options;\n\n\n\t/**\n\t * function to get fetch data instead of neo4j driver\n\t * \n\t * it needs to return a list of records\n\t * \n\t * example in examples/simple-dataFunction-example.html\n\t */\n\tdataFunction?: DataFunctionType\n\n\t/**\n\t * The Cypher query that will get the data\n\t */\n\tinitialCypher?: Cypher;\n\t/**\n\t * Should output debug messages to console\n\t * @default false\n\t */\n\tconsoleDebug?: boolean;\n\n\t/**\n\t * Should group be the label\n\t * @default true\n\t */\n\tgroupAsLabel?: boolean;\n\n\t/**\n\t * Tells Neovis is the config is flat or not\n\t * @default false\n\t */\n\tnonFlat?: boolean;\n\t/**\n\t * Tells Neovis whether to use bigint or not\n\t * @default false\n\t */\n\tuseBigInt?: boolean;\n}\n\n/**\n * @example\n * ```js\n * //simple\n * {\n *      containerId: \"viz\",\n *      neo4j: {\n *      \tserverUrl: \"bolt://localhost:7687\",\n *      \tserverUser: \"neo4j\",\n *      \tserverPassword: \"sorts-swims-burglaries\"\n *      },\n *      labels: {\n *      \tCharacter: {\n *      \t\tlabel: \"name\",\n *      \t\tvalue: \"pagerank\",\n *      \t\tgroup: \"community\"\n *      \t}\n *      },\n *      relationships: {\n *      \tINTERACTS: {\n *      \t\tvalue: \"weight\"\n *      \t}\n *      },\n *      initialCypher: \"MATCH (n)-[r:INTERACTS]->(m) RETURN n,r,m\"\n * }\n * // advance\n * {\n *      containerId: 'viz',\n *      neo4j: {\n *      \tserverUrl: 'bolt://localhost:7687',\n *      \tserverUser: 'neo4j',\n *      \tserverPassword: 'gland-presentation-worry'\n *      },\n *      visConfig: {\n *      \tnodes: {\n *      \t\tshape: 'square'\n *      \t},\n *      \tedges: {\n *      \t\tarrows: {\n *      \t\t\tto: {enabled: true}\n *      \t\t}\n *      \t},\n *      },\n *      labels: {\n *      \tCharacter: {\n *      \t\tlabel: 'pagerank',\n *      \t\tgroup: 'community',\n *      \t\t[Neovis.NEOVIS_ADVANCED_CONFIG]: {\n *      \t\t\tcypher: {\n *      \t\t\t\tvalue: \"MATCH (n) WHERE id(n) = $id RETURN n.size\"\n *      \t\t\t},\n *      \t\t\tfunction: {\n *      \t\t\t\ttitle: (node) => {\n *      \t\t\t\t\treturn viz.nodeToHtml(node, undefined);\n *      \t\t\t\t}\n *      \t\t\t},\n *      \t\t}\n *      \t}\n *      },\n *      relationships: {\n *      \tINTERACTS: {\n *      \t\tvalue: 'weight',\n *      \t\t[Neovis.NEOVIS_ADVANCED_CONFIG]: {\n *      \t\t\tfunction: {\n *      \t\t\t\ttitle: (edge) => {\n *      \t\t\t\t\treturn viz.nodeToHtml(edge, undefined);\n *      \t\t\t\t}\n *      \t\t\t},\n *      \t\t}\n *      \t}\n *      },\n *      initialCypher: 'MATCH (n)-[r]->(m) RETURN n,r,m'\n * }\n * ```\n */\nexport interface NeovisConfig extends BaseNeovisConfig {\n\tnonFlat?: false;\n\t/**\n\t * @example ```javascript\n\t *{\n\t * \tCharacter: {\n\t * \tlabel: 'pagerank',\n\t * \t\tgroup: 'community',\n\t * \t\t[Neovis.NEOVIS_ADVANCED_CONFIG]: {\n\t * \t\t\tcypher: {\n\t * \t\t\t\tvalue: \"MATCH (n) WHERE id(n) = $id RETURN n.size\"\n\t * \t\t\t},\n\t * \t\t\tfunction: {\n\t * \t\t\t\ttitle: (node) => {\n\t * \t\t\t\t\treturn viz.nodeToHtml(node, undefined);\n\t * \t\t\t\t}\n\t * \t\t\t},\n\t * \t\t}\n\t * \t}\n\t * }\n\t * ```\n\t */\n\tlabels?: {\n\t\t[label: string]: LabelConfig,\n\t\t[NEOVIS_DEFAULT_CONFIG]?: LabelConfig\n\t};\n\t/**\n\t * @example\n\t * ``` js\n\t * {\n\t *      INTERACTS: {\n\t *  \t    value: 'weight',\n\t *  \t    [Neovis.NEOVIS_ADVANCED_CONFIG]: {\n\t *  \t    \tfunction: {\n\t *  \t    \t\ttitle: (edge) => {\n\t *  \t    \t\t\treturn viz.nodeToHtml(edge, undefined);\n\t *  \t    \t\t}\n\t *  \t    \t},\n\t *  \t    }\n\t *      }\n\t * }\n\t * ```\n\t */\n\trelationships?: {\n\t\t[relationship: string]: RelationshipConfig,\n\t\t[NEOVIS_DEFAULT_CONFIG]?: RelationshipConfig\n\t};\n}\n\nexport type NonFlatLabelConfig = NonFlatNeoVisAdvanceConfig<VisNetwork.Node, Neo4jTypes.Node<number>>;\nexport type NonFlatRelationsipConfig = NonFlatNeoVisAdvanceConfig<VisNetwork.Edge, Neo4jTypes.Relationship<number>>;\n\n/**\n * non flat version of the configuration (without Symbols)\n * look at the normal config for more information\n *\n * @example\n * ```js\n * {\n *      containerId: 'viz',\n *      nonFlat: true,\n *      neo4j: {\n *      \tserverUrl: 'bolt://localhost:7687',\n *      \tserverUser: 'neo4j',\n *      \tserverPassword: 'gland-presentation-worry'\n *      },\n *      visConfig: {\n *      \tnodes: {\n *      \t\tshape: 'square'\n *      \t},\n *      \tedges: {\n *      \t\tarrows: {\n *      \t\t\tto: {enabled: true}\n *      \t\t}\n *      \t},\n *      },\n *      labels: {\n *      \tCharacter: {\n *      \t\tproperty: {\n *      \t\t    label: 'pagerank',\n *      \t\t    group: 'community'\n *      \t    }\n *      \t\tcypher: {\n *      \t\t\tvalue: \"MATCH (n) WHERE id(n) = $id RETURN n.size\"\n *      \t\t},\n *      \t\tfunction: {\n *      \t\t\ttitle: (node) => {\n *      \t\t\t\treturn viz.nodeToHtml(node, undefined);\n *      \t\t\t}\n *      \t\t}\n *      \t}\n *      },\n *      relationships: {\n *      \tINTERACTS: {\n *              property: {\n *      \t\t    value: 'weight'\n *      \t    }\n *      \t\tfunction: {\n *      \t\t\ttitle: (edge) => {\n *      \t\t\t\treturn viz.nodeToHtml(edge, undefined);\n *      \t\t\t}\n *      \t\t}\n *      \t}\n *      },\n *      initialCypher: 'MATCH (n)-[r]->(m) RETURN n,r,m'\n * }\n * ```\n */\nexport interface NonFlatNeovisConfig extends BaseNeovisConfig {\n\tnonFlat: true;\n\tdefaultLabelConfig?: NonFlatLabelConfig;\n\tdefaultRelationshipsConfig?: NonFlatRelationsipConfig;\n\tlabels?: Record<string, NonFlatLabelConfig>;\n\trelationships?: Record<string, NonFlatRelationsipConfig>;\n}\n\n/**\n * A network node with raw neo4j node\n */\nexport interface Node extends VisNetwork.Node {\n\t/**\n\t * @link https://neo4j.com/docs/api/javascript-driver/current/class/src/graph-types.js~Node.html\n\t */\n\traw: Neo4jTypes.Node<NumberOrInteger>;\n}\n\n/**\n * A network edge with raw neo4j relationship\n */\nexport interface Edge extends VisNetwork.Edge {\n\t/**\n\t * https://neo4j.com/docs/api/javascript-driver/current/class/src/graph-types.js~Relationship.html\n\t */\n\tid: number | string;\n\traw: Neo4jTypes.Relationship<NumberOrInteger>;\n}","'use strict';\n\nimport * as Neo4jTypes from 'neo4j-driver';\nimport Neo4j from 'neo4j-driver';\nimport * as Neo4jCore from 'neo4j-driver-core';\nimport type { NumberOrInteger } from 'neo4j-driver-core';\nimport { isInt, isNode, isPath, isRelationship } from 'neo4j-driver-core';\nimport * as vis from 'vis-network/standalone';\nimport { defaults } from './defaults';\nimport { EventController, EventFunctionTypes, NeoVisEvents } from './events';\nimport deepmerge from 'deepmerge';\nimport type * as VisNetwork from 'vis-network';\nimport {\n\tCypher,\n\tDataFunctionType,\n\tEdge,\n\tLabelConfig,\n\tNeo4jConfig,\n\tNEOVIS_ADVANCED_CONFIG,\n\tNEOVIS_DEFAULT_CONFIG,\n\tNeovisConfig,\n\tNeovisDataConfig,\n\tNode,\n\tNonFlatLabelConfig,\n\tNonFlatNeoVisAdvanceConfig,\n\tNonFlatNeovisConfig,\n\tNonFlatRelationsipConfig,\n\tRecursiveMapTo,\n\tRecursiveMapToFunction,\n\tRelationshipConfig\n} from './types';\n\nexport * from './events';\nexport * from './types';\n\nfunction toNeo4jInt({ low, high }: { high: number, low: number }): Neo4jTypes.Integer {\n\treturn new Neo4j.types.Integer(low, high);\n}\n\nfunction integerToNumber(integer: Neo4jTypes.Integer): number | string {\n\treturn integer.getHighBits() === 0 ? integer.toInt() : integer.toString();\n}\n\nfunction bigIntToString(integer: Neo4jTypes.Integer): string {\n\treturn integer.toBigInt().toString();\n}\n\ninterface FakeIdentity {\n\thigh: number,\n\tlow: number\n}\ninterface FakeNode {\n\tlabels: string[];\n\tidentity: FakeIdentity;\n\tproperties: Record<string, FakeIdentity | unknown>;\n}\n\ninterface FakeRelationship {\n\tidentity: FakeIdentity;\n\ttype: string;\n\tstart: FakeIdentity;\n\tend: FakeIdentity;\n\tproperties: Record<string, FakeIdentity | unknown>;\n}\n\ninterface FakePathSegments {\n\tstart: FakeNode;\n\tend: FakeNode;\n\trelationship: FakeRelationship\n}\n\ninterface FakePath {\n\tstart: FakeNode;\n\tend: FakeNode;\n\tsegments: FakePathSegments[];\n}\n\nconst FakeTypeToType: Record<number, {keys: string[]; type: new(..._) => unknown;}[]> = {\n\t2: [{\n\t\tkeys: ['low', 'high'],\n\t\ttype: Neo4j.types.Integer\n\t}],\n\t3: [{\n\t\tkeys: ['year', 'month', 'day'],\n\t\ttype: Neo4j.types.Date\n\t}, {\n\t\tkeys: ['srid', 'x', 'y'],\n\t\ttype: Neo4j.types.Point\n\t}],\n\t4: [{\n\t\tkeys: ['months', 'days', 'seconds', 'nanoseconds'],\n\t\ttype: Neo4j.types.Duration\n\t}, {\n\t\tkeys: ['hour', 'minute', 'second', 'nanosecond'],\n\t\ttype: Neo4j.types.LocalTime\n\t}, {\n\t\tkeys: ['srid', 'x', 'y', 'z'],\n\t\ttype: Neo4j.types.Point\n\t}],\n\t5: [{\n\t\tkeys: ['hour', 'minute', 'second', 'nanosecond', 'timeZoneOffsetSeconds'],\n\t\ttype: Neo4j.types.Time\n\t}],\n\t7: [{\n\t\tkeys: ['year', 'month', 'day', 'hour', 'minute', 'second', 'nanosecond'],\n\t\ttype: Neo4j.types.LocalDateTime\n\t}],\n\t8: [{\n\t\tkeys: ['year', 'month', 'day', 'hour', 'minute', 'second', 'nanosecond', 'timeZoneOffsetSeconds'],\n\t\ttype: Neo4j.types.DateTime\n\t}],\n\t9: [{\n\t\tkeys: ['year', 'month', 'day', 'hour', 'minute', 'second', 'nanosecond', 'timeZoneOffsetSeconds', 'timeZoneId'],\n\t\ttype: Neo4j.types.DateTime\n\t}]\n};\n\nfunction isFakeInteger(property: FakeIdentity | unknown): property is FakeIdentity {\n\treturn typeof property === 'object' && 'high' in property && 'low' in property && Object.keys(property).length == 2;\n}\n\nfunction propertyToNormal(value: unknown): unknown {\n\tif (Array.isArray(value)) {\n\t\treturn value.map(propertyToNormal);\n\t} else if (value && typeof value === 'object' && Object.keys(value).length in FakeTypeToType) {\n\t\tfor(const fakeType of FakeTypeToType[Object.keys(value).length]) {\n\t\t\tlet isCorrectType = true;\n\t\t\tconst rets: unknown[] = [];\n\t\t\tfor(const key of fakeType.keys) {\n\t\t\t\tif(!(key in value)) {\n\t\t\t\t\tisCorrectType = false;\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\trets.push(isFakeInteger(value[key]) ? new Neo4j.types.Integer(value[key].low, value[key].high): value[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(isCorrectType) {\n\t\t\t\treturn new fakeType.type(...rets);\n\t\t\t}\n\t\t}\n\t} else {\n\t\treturn value;\n\t}\n}\n\nfunction properyMapWithIdentity(properties: Record<string, FakeIdentity | unknown>): Record<string, Neo4jTypes.Integer | unknown> {\n\treturn Object.entries(properties).reduce((ret, [key, value]) => {\n\t\tret[key] = propertyToNormal(value);\n\t\treturn ret;\n\t}, {});\n}\n\nfunction dumbToNeo4j(field: FakeNode | FakeRelationship | FakePath | FakeNode[] | FakeRelationship[] | FakePath[]): Neo4jTypes.Node | Neo4jTypes.Relationship | Neo4jTypes.Path | (Neo4jTypes.Node | Neo4jTypes.Relationship | Neo4jTypes.Path)[] {\n\tif ('labels' in field) {\n\t\treturn new Neo4j.types.Node(toNeo4jInt(field.identity), field.labels, properyMapWithIdentity(field.properties));\n\t} else if ('type' in field) {\n\t\treturn new Neo4j.types.Relationship(toNeo4jInt(field.identity), toNeo4jInt(field.start), toNeo4jInt(field.end), field.type, properyMapWithIdentity(field.properties));\n\t} else if ('segments' in field) {\n\t\treturn new Neo4j.types.Path(\n\t\t\tnew Neo4j.types.Node(toNeo4jInt(field.start.identity), field.start.labels, properyMapWithIdentity(field.start.properties)),\n\t\t\tnew Neo4j.types.Node(toNeo4jInt(field.end.identity), field.end.labels, properyMapWithIdentity(field.end.properties)),\n\t\t\tfield.segments.map(segment => new Neo4j.types.PathSegment(\n\t\t\t\tnew Neo4j.types.Node(toNeo4jInt(segment.start.identity), segment.start.labels, properyMapWithIdentity(segment.start.properties)),\n\t\t\t\tnew Neo4j.types.Relationship(toNeo4jInt(segment.relationship.identity), toNeo4jInt(segment.relationship.start), toNeo4jInt(segment.relationship.end), segment.relationship.type, properyMapWithIdentity(segment.relationship.properties)),\n\t\t\t\tnew Neo4j.types.Node(toNeo4jInt(segment.end.identity), segment.end.labels, properyMapWithIdentity(segment.end.properties))\n\t\t\t))\n\t\t);\n\t} else if (Array.isArray(field)) {\n\t\treturn field.flatMap(dumbToNeo4j);\n\t}\n}\n\nfunction isNeo4jDriver(neo4jConfig: Neo4jTypes.Driver | Neo4jConfig): neo4jConfig is Neo4jTypes.Driver {\n\treturn neo4jConfig instanceof Neo4j.driver;\n}\nfunction _propertyToHtml<T extends { toString: () => string }>(key: string, value: T | T[]): string {\n\tif (Array.isArray(value) && value.length > 1) {\n\t\tlet out = `<strong>${key}:</strong><br /><ul>`;\n\t\tfor (const val of value) {\n\t\t\tout += `<li>${val}</li>`;\n\t\t}\n\t\treturn out + '</ul>';\n\t}\n\treturn `<strong>${key}:</strong> ${value}<br>`;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _retrieveProperty<T>(prop: string, obj: any, useBigInt = false): T {\n\tif (typeof obj?.properties === 'object') {\n\t\treturn typeof obj.properties[prop] === 'bigint'\n\t\t\t? `${obj.properties[prop]}`\n\t\t\t:isInt(obj.properties[prop]) ?\n\t\t\t\tuseBigInt ? bigIntToString(obj.properties[prop]) : integerToNumber(obj.properties[prop])\n\t\t\t\t: obj.properties[prop];\n\t}\n\tthrow new Error('Neo4j object is not properly constructed');\n}\n\n/**\n * create html display of the node\n * @param neo4jObject node to create html from\n * @param titleProperties which properties to map\n */\nexport function objectToTitleHtml(neo4jObject: Neo4jTypes.Node<NumberOrInteger> | Neo4jTypes.Relationship<NumberOrInteger>, titleProperties: string[]): HTMLDivElement {\n\tlet titleString = '';\n\tif (!titleProperties) {\n\t\ttitleProperties = Object.keys(neo4jObject.properties);\n\t}\n\tfor (const key of titleProperties) {\n\t\tconst propVal = _retrieveProperty(key, neo4jObject);\n\t\tif (propVal) {\n\t\t\ttitleString += _propertyToHtml(key, propVal);\n\t\t}\n\t}\n\tconst title = document.createElement('div');\n\ttitle.innerHTML = titleString;\n\treturn title;\n}\n\n/**\n * create string display of the node\n * @param neo4jObject node to create title string from\n * @param titleProperties which properties to map\n */\nexport function objectToTitleString(neo4jObject: Neo4jTypes.Node<NumberOrInteger> | Neo4jTypes.Relationship<NumberOrInteger>, titleProperties: string[]): string {\n\tlet title = '';\n\tif (!titleProperties) {\n\t\ttitleProperties = Object.keys(neo4jObject.properties);\n\t}\n\tfor (const key of titleProperties) {\n\t\tconst propVal = _retrieveProperty(key, neo4jObject);\n\t\tif (propVal) {\n\t\t\ttitle += `${key}: ${propVal}\\n`;\n\t\t}\n\t}\n\treturn title;\n}\n\nexport class NeoVis {\n\tstatic NEOVIS_DEFAULT_CONFIG = NEOVIS_DEFAULT_CONFIG;\n\tstatic NEOVIS_ADVANCED_CONFIG = NEOVIS_ADVANCED_CONFIG;\n\tstatic objectToTitleHtml = objectToTitleHtml;\n\tstatic objectToTitleString = objectToTitleString;\n\t#data = {\n\t\tnodes: new vis.DataSet<Node>(),\n\t\tedges: new vis.DataSet<Edge>()\n\t};\n\t#network: VisNetwork.Network = null;\n\t#events = new EventController();\n\t#config: NeovisConfig | NonFlatNeovisConfig;\n\t#driver: Neo4jTypes.Driver;\n\t#database: string;\n\t#query: Cypher;\n\t#container: HTMLElement;\n\n\t/**\n\t * All view nodes as DataSet\n\t * @link https://visjs.github.io/vis-data/data/dataset.html\n\t */\n\tget nodes(): VisNetwork.DataSet<Node> {\n\t\treturn this.#data.nodes;\n\t}\n\n\t/**\n\t * All view edges as DataSet\n\t * @link https://visjs.github.io/vis-data/data/dataset.html\n\t */\n\tget edges(): VisNetwork.DataSet<Edge> {\n\t\treturn this.#data.edges;\n\t}\n\n\t/**\n\t * @ignore for test purposes only\n\t */\n\tget _config(): NeovisConfig | NonFlatNeovisConfig {\n\t\treturn this.#config;\n\t}\n\n\t/**\n\t * The vis network object\n\t * @link https://visjs.github.io/vis-network/docs/network/#methods\n\t */\n\tget network(): VisNetwork.Network | undefined {\n\t\treturn this.#network;\n\t}\n\n\t/**\n\t *\n\t * @constructor\n\t * @param {object} config - configures the visualization and Neo4j server connection\n\t */\n\tconstructor(config: NeovisConfig | NonFlatNeovisConfig) {\n\t\tthis.#init(config);\n\n\t\tthis.#consoleLog(config);\n\t\tthis.#consoleLog(defaults);\n\t}\n\n\t#consoleLog(message: object | string, level = 'log'): void {\n\t\tif (level !== 'log' || this.#config.consoleDebug) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole[level](message);\n\t\t}\n\t}\n\n\t#init(config: NeovisConfig | NonFlatNeovisConfig): void {\n\t\tlet defaultLabelConfig: NonFlatLabelConfig | LabelConfig;\n\t\tlet defaultRelationshipConfig: NonFlatRelationsipConfig | RelationshipConfig;\n\t\tif (config.nonFlat && config.defaultLabelConfig) {\n\t\t\tdefaultLabelConfig = config.defaultLabelConfig;\n\t\t\tif (defaultLabelConfig[NEOVIS_ADVANCED_CONFIG]) {\n\t\t\t\tthrow new Error('non flat config can\\'t use NEOVIS_ADVANCED_CONFIG, read the doc to see how the config should look');\n\t\t\t}\n\t\t\tdefaultRelationshipConfig = config.defaultRelationshipsConfig;\n\t\t\tif (defaultRelationshipConfig[NEOVIS_ADVANCED_CONFIG]) {\n\t\t\t\tthrow new Error('non flat config can\\'t use NEOVIS_ADVANCED_CONFIG, read the doc to see how the config should look');\n\t\t\t}\n\t\t} else {\n\t\t\tdefaultLabelConfig = (config as NeovisConfig).labels?.[NEOVIS_DEFAULT_CONFIG];\n\t\t\tdefaultRelationshipConfig = (config as NeovisConfig).relationships?.[NEOVIS_DEFAULT_CONFIG];\n\t\t}\n\t\tif (defaultLabelConfig) {\n\t\t\tfor (const key of Object.keys(config.labels)) {\n\t\t\t\t// getting out of my for not changing the original config object\n\t\t\t\tif (config.nonFlat) {\n\t\t\t\t\t(config as NonFlatNeovisConfig) = {\n\t\t\t\t\t\t...config as NonFlatNeovisConfig,\n\t\t\t\t\t\tlabels: {\n\t\t\t\t\t\t\t...config.labels as Record<string, NonFlatLabelConfig>,\n\t\t\t\t\t\t\t[key]: deepmerge(defaultLabelConfig as NonFlatLabelConfig, config.labels?.[key] as NonFlatLabelConfig)\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\t(config as NeovisConfig) = {\n\t\t\t\t\t\t...config as NeovisConfig,\n\t\t\t\t\t\tlabels: {\n\t\t\t\t\t\t\t...config.labels as Record<string, LabelConfig>,\n\t\t\t\t\t\t\t[key]: {\n\t\t\t\t\t\t\t\t...deepmerge(defaultLabelConfig as LabelConfig, config.labels?.[key] as LabelConfig),\n\t\t\t\t\t\t\t\t[NEOVIS_ADVANCED_CONFIG]: deepmerge((defaultLabelConfig as LabelConfig)[NEOVIS_ADVANCED_CONFIG] ?? {}, (config.labels?.[key] as LabelConfig)[NEOVIS_ADVANCED_CONFIG] ?? {}),\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (defaultRelationshipConfig) {\n\t\t\tfor (const key of Object.keys(config.relationships)) {\n\t\t\t\t// getting out of my for not changing the original config object\n\t\t\t\tif (config.nonFlat) {\n\t\t\t\t\t(config as NonFlatNeovisConfig) = {\n\t\t\t\t\t\t...config as NonFlatNeovisConfig,\n\t\t\t\t\t\trelationships: {\n\t\t\t\t\t\t\t...config.relationships as Record<string, NonFlatRelationsipConfig>,\n\t\t\t\t\t\t\t[key]: deepmerge(defaultRelationshipConfig as NonFlatRelationsipConfig, config.relationships?.[key] as NonFlatRelationsipConfig)\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\t(config as NeovisConfig) = {\n\t\t\t\t\t\t...config as NeovisConfig,\n\t\t\t\t\t\trelationships: {\n\t\t\t\t\t\t\t...config.relationships as Record<string, RelationshipConfig>,\n\t\t\t\t\t\t\t[key]: {\n\t\t\t\t\t\t\t\t...deepmerge(defaultRelationshipConfig as RelationshipConfig, config.relationships?.[key] as RelationshipConfig),\n\t\t\t\t\t\t\t\t[NEOVIS_ADVANCED_CONFIG]: deepmerge((defaultRelationshipConfig as RelationshipConfig)[NEOVIS_ADVANCED_CONFIG] ?? {}, (config.relationships?.[key] as RelationshipConfig)[NEOVIS_ADVANCED_CONFIG] ?? {}),\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.#config = config;\n\t\tif (!config.dataFunction) {\n\t\t\tthis.#driver = isNeo4jDriver(config.neo4j) ? config.neo4j : Neo4j.driver(\n\t\t\t\tconfig.neo4j?.serverUrl ?? defaults.neo4j.neo4jUri,\n\t\t\t\tNeo4j.auth.basic(\n\t\t\t\t\tconfig.neo4j?.serverUser ?? defaults.neo4j.neo4jUser,\n\t\t\t\t\tconfig.neo4j?.serverPassword ?? defaults.neo4j.neo4jPassword\n\t\t\t\t),\n\t\t\t\tdeepmerge(defaults.neo4j.driverConfig, config.neo4j?.driverConfig ?? {})\n\t\t\t);\n\n\t\t\tthis.#database = config.serverDatabase;\n\t\t\tthis.#query = config.initialCypher ?? defaults.neo4j.initialQuery;\n\t\t}\n\t\tthis.#container = document.getElementById(config.containerId);\n\t\tthis.#config.groupAsLabel = config.groupAsLabel ?? defaults.neo4j.groupAsLabel;\n\t}\n\n\tasync #runCypher<T>(cypher: Cypher, id: NumberOrInteger): Promise<T | T[]> {\n\t\tconst session = this.#driver.session(this.#database && { database: this.#database });\n\t\tconst results: T[] = [];\n\n\t\ttry {\n\t\t\tconst result = await session.readTransaction(tx => tx.run(cypher, { id }));\n\t\t\tfor (const record of result.records) {\n\t\t\t\trecord.forEach((v) => {\n\t\t\t\t\tresults.push(v);\n\t\t\t\t});\n\t\t\t}\n\t\t} finally {\n\t\t\tawait session.close();\n\t\t}\n\n\t\tif (results.length === 0) {\n\t\t\treturn undefined;\n\t\t} else if (results.length === 1) {\n\t\t\treturn results.pop();\n\t\t}\n\n\t\treturn results;\n\t}\n\n\t#runFunction<VIS_TYPE, NEO_TYPE>(func: (neoObj: NEO_TYPE) => VIS_TYPE | Promise<VIS_TYPE>, node: NEO_TYPE): Promise<VIS_TYPE> | VIS_TYPE {\n\t\tif (typeof func === 'function') {\n\t\t\treturn func(node);\n\t\t}\n\t\tthrow new Error('Function type property field must be a function');\n\t}\n\n\t#buildStaticObject<VIS_TYPE>(staticConfig: VIS_TYPE, object: VIS_TYPE): void {\n\t\tif (staticConfig && typeof staticConfig === 'object') {\n\t\t\tfor (const prop of Object.keys(staticConfig) as (keyof VIS_TYPE)[]) {\n\t\t\t\tconst value = staticConfig[prop];\n\t\t\t\tif (value && typeof value === 'object') {\n\t\t\t\t\tif (!object[prop]) {\n\t\t\t\t\t\tobject[prop as string] = {};\n\t\t\t\t\t}\n\t\t\t\t\tthis.#buildStaticObject(value, object[prop] as VIS_TYPE[keyof VIS_TYPE] & object);\n\t\t\t\t} else {\n\t\t\t\t\tobject[prop] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t#buildPropertyNameObject<VIS_TYPE, NEO_TYPE>(propertyNameConfig: RecursiveMapTo<VIS_TYPE, string>, object: VIS_TYPE, neo4jObj: NEO_TYPE): void {\n\t\tif (propertyNameConfig && typeof propertyNameConfig === 'object') {\n\t\t\tfor (const prop of Object.keys(propertyNameConfig) as (keyof VIS_TYPE)[]) {\n\t\t\t\tconst property = propertyNameConfig[prop];\n\t\t\t\tif (typeof property === 'object') {\n\t\t\t\t\tif (!object[prop]) {\n\t\t\t\t\t\tobject[prop as string] = {};\n\t\t\t\t\t}\n\t\t\t\t\tthis.#buildPropertyNameObject(property as RecursiveMapTo<VIS_TYPE[keyof VIS_TYPE], string>, object[prop], neo4jObj);\n\t\t\t\t} else {\n\t\t\t\t\tconst value = propertyNameConfig[prop];\n\t\t\t\t\tobject[prop] = _retrieveProperty(value as string, neo4jObj, this.#config.useBigInt);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t*#buildCypherObject<VIS_TYPE>(cypherConfig: RecursiveMapTo<VIS_TYPE, Cypher>, object: VIS_TYPE, id: NumberOrInteger): Generator<Promise<void>> {\n\t\tif (cypherConfig && typeof cypherConfig === 'object') {\n\t\t\tfor (const prop of Object.keys(cypherConfig) as (keyof VIS_TYPE)[]) {\n\t\t\t\tconst value = cypherConfig[prop];\n\t\t\t\tif (value && typeof value === 'object') {\n\t\t\t\t\tif (!object[prop]) {\n\t\t\t\t\t\tobject[prop as string] = {};\n\t\t\t\t\t}\n\t\t\t\t\tyield* this.#buildCypherObject(value as RecursiveMapTo<VIS_TYPE[keyof VIS_TYPE], Cypher>, object[prop], id);\n\t\t\t\t} else {\n\t\t\t\t\tconst promise = this.#runCypher(value as string, id) as Promise<VIS_TYPE[keyof VIS_TYPE]>;\n\t\t\t\t\tyield Promise.resolve(promise).then(value => { object[prop] = value; }) as Promise<void>;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t*#buildFunctionObject<VIS_TYPE, NEO_TYPE>(functionConfig: RecursiveMapToFunction<VIS_TYPE, NEO_TYPE>, object: VIS_TYPE, neo4jObj: NEO_TYPE): Generator<Promise<void>> {\n\t\tif (functionConfig && typeof functionConfig === 'object') {\n\t\t\tfor (const prop of Object.keys(functionConfig) as (keyof VIS_TYPE)[]) {\n\t\t\t\tconst func = functionConfig[prop];\n\t\t\t\tif (func && typeof func === 'object') {\n\t\t\t\t\tif (!object[prop]) {\n\t\t\t\t\t\tobject[prop as string] = {};\n\t\t\t\t\t}\n\t\t\t\t\tyield* this.#buildFunctionObject(func as RecursiveMapToFunction<VIS_TYPE[keyof VIS_TYPE], NEO_TYPE>, object[prop], neo4jObj);\n\t\t\t\t} else {\n\t\t\t\t\tconst promise = this.#runFunction(func as (neo: NEO_TYPE) => VIS_TYPE[keyof VIS_TYPE], neo4jObj);\n\t\t\t\t\tyield Promise.resolve(promise).then(value => { object[prop] = value; }) as Promise<void>;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tasync #buildVisObject<VIS_TYPE, NEO_TYPE>(\n\t\tconfig: NeovisDataConfig<VIS_TYPE, NEO_TYPE> | NonFlatNeoVisAdvanceConfig<VIS_TYPE, NEO_TYPE>, baseObject: VIS_TYPE, neo4jObject: NEO_TYPE, id: NumberOrInteger\n\t): Promise<void> {\n\t\tif (!config) {\n\t\t\treturn;\n\t\t}\n\t\tlet staticConfig: VIS_TYPE;\n\t\tlet cypherConfig: RecursiveMapTo<VIS_TYPE, Cypher>;\n\t\tlet propertyConfig: RecursiveMapTo<VIS_TYPE, string>;\n\t\tlet functionConfig: RecursiveMapToFunction<VIS_TYPE, NEO_TYPE>;\n\n\t\tif (this.#config.nonFlat) {\n\t\t\tif (config[NEOVIS_ADVANCED_CONFIG] !== undefined) {\n\t\t\t\tthrow new Error('Advanced config and non flat config should not be together');\n\t\t\t}\n\t\t\tconfig = config as NonFlatNeoVisAdvanceConfig<VIS_TYPE, NEO_TYPE>;\n\t\t\tstaticConfig = config.static;\n\t\t\tcypherConfig = config.cypher;\n\t\t\tpropertyConfig = config.property;\n\t\t\tfunctionConfig = config.function;\n\t\t} else {\n\t\t\tconfig = config as NeovisDataConfig<VIS_TYPE, NEO_TYPE>;\n\t\t\tconst advancedConfig = config[NEOVIS_ADVANCED_CONFIG];\n\t\t\tpropertyConfig = config;\n\t\t\tif (advancedConfig !== undefined && typeof advancedConfig != 'object') {\n\t\t\t\tthrow new Error('Advanced config should be an object. See documentation for details.');\n\t\t\t}\n\t\t\tcypherConfig = advancedConfig?.cypher;\n\t\t\tstaticConfig = advancedConfig?.static;\n\t\t\tfunctionConfig = advancedConfig?.function;\n\t\t}\n\t\tthis.#buildPropertyNameObject(propertyConfig, baseObject, neo4jObject);\n\t\tthis.#buildStaticObject(staticConfig, baseObject);\n\t\tawait Promise.all(this.#buildCypherObject(cypherConfig, baseObject, id));\n\t\tawait Promise.all(this.#buildFunctionObject(functionConfig, baseObject, neo4jObject));\n\t}\n\n\t/**\n\t * Build node object for vis from a neo4j Node\n\t * @param neo4jNode\n\t * @returns {{}}\n\t */\n\tasync #buildNodeVisObject(neo4jNode: Neo4jTypes.Node<NumberOrInteger>): Promise<Node> {\n\t\tconst node: Partial<Node> = {};\n\t\tconst label: string = neo4jNode.labels[0];\n\n\t\tconst labelConfig: LabelConfig | NonFlatLabelConfig = this.#config?.labels?.[label] ?? (this.#config as NonFlatNeovisConfig)?.defaultLabelConfig ??\n\t\t\t(this.#config as NeovisConfig)?.labels?.[NEOVIS_DEFAULT_CONFIG];\n\t\tconst useBigInt: boolean = this.#config?.useBigInt;\n\t\tnode.id = typeof neo4jNode.identity === 'bigint'\n\t\t\t? `${neo4jNode.identity}`\n\t\t\t: isInt(neo4jNode.identity)\n\t\t\t\t? useBigInt ? bigIntToString(neo4jNode.identity as Neo4jTypes.Integer) : integerToNumber(neo4jNode.identity as Neo4jTypes.Integer)\n\t\t\t\t: neo4jNode.identity as number;\n\t\tnode.raw = neo4jNode;\n\t\tif (this.#config.groupAsLabel) {\n\t\t\tnode.group = label;\n\t\t}\n\n\t\tawait this.#buildVisObject(labelConfig, node as Node, neo4jNode, neo4jNode.identity);\n\n\t\treturn node as Node;\n\t}\n\n\n\t/**\n\t * Build edge object for vis from a neo4j Relationship\n\t * @param r\n\t * @returns {{}}\n\t */\n\tasync #buildEdgeVisObject(r: Neo4jTypes.Relationship<NumberOrInteger>): Promise<Edge> {\n\t\tconst relationshipConfig = this.#config?.relationships?.[r.type] ?? (this.#config as NonFlatNeovisConfig).defaultRelationshipsConfig ??\n\t\t\t(this.#config as NeovisConfig)?.relationships?.[NEOVIS_DEFAULT_CONFIG];\n\n\t\tconst edge: Partial<Edge> = {};\n\t\tconst useBigInt: boolean = this.#config?.useBigInt;\n\t\tedge.id = typeof r.identity === 'bigint'\n\t\t\t? `${r.identity}`\n\t\t\t: isInt(r.identity)\n\t\t\t\t? useBigInt ? bigIntToString(r.identity as Neo4jTypes.Integer) : integerToNumber(r.identity as Neo4jTypes.Integer)\n\t\t\t\t: r.identity as number;\n\t\tedge.from = typeof r.start === 'bigint'\n\t\t\t? `${r.start}`\n\t\t\t: isInt(r.start)\n\t\t\t\t? useBigInt ? bigIntToString(r.start as Neo4jTypes.Integer) : integerToNumber(r.start as Neo4jTypes.Integer)\n\t\t\t\t: r.start as number;\n\t\tedge.to = typeof r.end === 'bigint'\n\t\t\t? `${r.end}`\n\t\t\t: isInt(r.end)\n\t\t\t\t? useBigInt ? bigIntToString(r.end as Neo4jTypes.Integer) : integerToNumber(r.end as Neo4jTypes.Integer)\n\t\t\t\t: r.end as number;\n\t\tedge.raw = r;\n\t\tedge.label = r.type;\n\n\t\tawait this.#buildVisObject(relationshipConfig, edge as Edge, r, r.identity);\n\n\t\treturn edge as Edge;\n\t}\n\n\t/**\n\t * Renders the network\n\t */\n\trender(query_or_function?: Cypher | DataFunctionType, parameters?: unknown): void {\n\t\tif (this.#config.dataFunction || typeof query_or_function === 'function') {\n\t\t\tthis.#runFunctionDataGetter(typeof query_or_function === 'function' ? query_or_function : this.#config.dataFunction, parameters);\n\t\t} else {\n\t\t\tthis.#runNeo4jDataGetter(query_or_function as Cypher, parameters);\n\t\t}\n\t}\n\n\tasync #runFunctionDataGetter(func: DataFunctionType, parameters: unknown) {\n\t\tlet recordCount = 0;\n\t\ttry {\n\t\t\tconst dataBuildPromises: Promise<unknown>[] = [];\n\t\t\tfor await (const record of await func(parameters)) {\n\t\t\t\tdataBuildPromises.push(this.#createSingleRecord(record));\n\t\t\t\trecordCount++;\n\t\t\t}\n\t\t\tawait Promise.all(dataBuildPromises);\n\t\t} catch (error) {\n\t\t\tthis.#events.generateEvent(NeoVisEvents.ErrorEvent, { error });\n\t\t\treturn;\n\t\t}\n\t\tthis.#completeRun();\n\t\tthis.#events.generateEvent(NeoVisEvents.CompletionEvent, { recordCount });\n\t}\n\n\t#runNeo4jDataGetter(query?: Cypher, parameters?: unknown) {\n\t\t// connect to Neo4j instance\n\t\t// run query\n\t\tlet recordCount = 0;\n\t\tconst _query = query || this.#query;\n\t\tconst session = this.#driver.session(this.#database ? { database: this.#database } : undefined);\n\t\tconst dataBuildPromises: Promise<unknown>[] = [];\n\t\tsession.run(_query, parameters)\n\t\t\t.subscribe({\n\t\t\t\tonNext: (record) => {\n\t\t\t\t\trecordCount++;\n\t\t\t\t\tdataBuildPromises.push(this.#createSingleRecord(record));\n\t\t\t\t},\n\t\t\t\tonCompleted: async () => {\n\t\t\t\t\tawait Promise.all(dataBuildPromises);\n\t\t\t\t\tawait session.close();\n\n\t\t\t\t\tthis.#completeRun();\n\t\t\t\t\tthis.#events.generateEvent(NeoVisEvents.CompletionEvent, { recordCount });\n\t\t\t\t},\n\t\t\t\tonError: (error) => {\n\t\t\t\t\tthis.#consoleLog(error, 'error');\n\t\t\t\t\tthis.#events.generateEvent(NeoVisEvents.ErrorEvent, { error });\n\t\t\t\t}\n\t\t\t} as Neo4jCore.ResultObserver);\n\t}\n\n\tasync #createSingleRecord(record: Neo4jTypes.Record | Partial<Neo4jTypes.Record>) {\n\t\tif (!(record instanceof Neo4j.types.Record)) {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\t\tconst fields: (FakeNode | FakePath | FakeRelationship)[] = (record as any)._fields;\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\t\trecord = new Neo4j.types.Record(record.keys, fields.map(dumbToNeo4j), (record as any)._fieldLookup);\n\t\t}\n\t\tthis.#consoleLog('CLASS NAME');\n\t\tthis.#consoleLog(record?.constructor.name);\n\t\tthis.#consoleLog(record);\n\n\t\tconst dataPromises = record.map(async (v: object) => {\n\t\t\tthis.#consoleLog('Constructor:');\n\t\t\tthis.#consoleLog(v?.constructor.name);\n\t\t\tif (isNode(v)) {\n\t\t\t\tconst node = await this.#buildNodeVisObject(v);\n\t\t\t\ttry {\n\t\t\t\t\tthis.#data.nodes.update(node);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthis.#consoleLog(e, 'error');\n\t\t\t\t}\n\n\t\t\t} else if (isRelationship(v)) {\n\t\t\t\tconst edge = await this.#buildEdgeVisObject(v);\n\t\t\t\tthis.#data.edges.update(edge);\n\n\t\t\t} else if (isPath(v)) {\n\t\t\t\tthis.#consoleLog('PATH');\n\t\t\t\tthis.#consoleLog(v);\n\t\t\t\tconst startNode = await this.#buildNodeVisObject(v.start);\n\t\t\t\tconst endNode = await this.#buildNodeVisObject(v.end);\n\n\t\t\t\tthis.#data.nodes.update(startNode);\n\t\t\t\tthis.#data.nodes.update(endNode);\n\n\t\t\t\tfor (const obj of v.segments) {\n\t\t\t\t\tthis.#data.nodes.update(await this.#buildNodeVisObject(obj.start));\n\t\t\t\t\tthis.#data.nodes.update(await this.#buildNodeVisObject(obj.end));\n\t\t\t\t\tthis.#data.edges.update(await this.#buildEdgeVisObject(obj.relationship));\n\t\t\t\t}\n\n\t\t\t} else if (Array.isArray(v)) {\n\t\t\t\tfor (const obj of v) {\n\t\t\t\t\tthis.#consoleLog('Array element constructor:');\n\t\t\t\t\tthis.#consoleLog(obj?.constructor.name);\n\t\t\t\t\tif (isNode(obj)) {\n\t\t\t\t\t\tconst node = await this.#buildNodeVisObject(obj);\n\t\t\t\t\t\tthis.#data.nodes.update(node);\n\n\t\t\t\t\t} else if (isRelationship(obj)) {\n\t\t\t\t\t\tconst edge = await this.#buildEdgeVisObject(obj);\n\n\t\t\t\t\t\tthis.#data.edges.update(edge);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn Promise.all(dataPromises);\n\t}\n\n\t#completeRun() {\n\t\tif (!this.#network) {\n\t\t\tconst options = deepmerge(defaults.visJs, this.#config.visConfig ?? {});\n\n\t\t\tconst container = this.#container;\n\n\t\t\tthis.#consoleLog(this.#data.nodes);\n\t\t\tthis.#consoleLog(this.#data.edges);\n\n\t\t\tthis.#network = new vis.Network(container, this.#data, options);\n\t\t}\n\t\tthis.#consoleLog('completed');\n\t\tsetTimeout(\n\t\t\t() => {\n\t\t\t\tthis.#network.stopSimulation();\n\t\t\t},\n\t\t\t10000\n\t\t);\n\n\t\t// eslint-disable-next-line @typescript-eslint/no-this-alias\n\t\tconst neoVis = this;\n\t\tthis.#network.on('click', function (this: VisNetwork.Network, params: { nodes: Node[], edges: Edge[], pointer: { DOM: VisNetwork.Position } }) {\n\t\t\tif (params.nodes.length > 0) {\n\t\t\t\tconst nodeId = this.getNodeAt(params.pointer.DOM) as number;\n\t\t\t\tneoVis.#events.generateEvent(NeoVisEvents.ClickNodeEvent, {\n\t\t\t\t\tnodeId,\n\t\t\t\t\tnode: neoVis.#data.nodes.get(nodeId)\n\t\t\t\t});\n\t\t\t} else if (params.edges.length > 0) {\n\t\t\t\tconst edgeId = this.getEdgeAt(params.pointer.DOM) as number;\n\t\t\t\tneoVis.#events.generateEvent(NeoVisEvents.ClickEdgeEvent, {\n\t\t\t\t\tedgeId,\n\t\t\t\t\tedge: neoVis.#data.edges.get(edgeId)\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Clear the data for the visualization\n\t */\n\tclearNetwork(): void {\n\t\tthis.#data.nodes.clear();\n\t\tthis.#data.edges.clear();\n\t}\n\n\n\t/**\n\t *\n\t * @param {string} eventType Event type to be handled\n\t * @param {Function} handler Handler to manage the event\n\t */\n\tregisterOnEvent<T extends NeoVisEvents>(eventType: T, handler: EventFunctionTypes[T]): void {\n\t\tthis.#events.register(eventType, handler);\n\t}\n\n\n\t/**\n\t * Reset the config object and reload data\n\t * @param config\n\t */\n\treinit(config: NeovisConfig | NonFlatNeovisConfig, parameter?: unknown): void {\n\t\tthis.#init(config);\n\t\tthis.render(undefined, parameter);\n\t}\n\n\t/**\n\t * Clear the network and fetch live data form the server and reload the visualization\n\t */\n\treload(parameter?: unknown): void {\n\t\tthis.clearNetwork();\n\t\tthis.render(undefined, parameter);\n\t}\n\n\t/**\n\t * Stabilize the visualization\n\t */\n\tstabilize(): void {\n\t\tthis.#network.stopSimulation();\n\t\tthis.#consoleLog('Calling stopSimulation');\n\t}\n\n\t/**\n\t * Execute an arbitrary Cypher query and re-render the visualization\n\t * @param query\n\t * @param parameters - parameters to send to the cypher\n\t */\n\trenderWithCypher(query: Cypher, parameters?: unknown): void {\n\t\t// this._config.initialCypher = query;\n\t\tthis.clearNetwork();\n\t\tthis.#query = query;\n\t\tthis.render(undefined, parameters);\n\t}\n\t\n\t/**\n\t * Execute an arbitrary function and re-render the visualization\n\t * @param func\n\t * @param parameters - parameters to send to the function\n\t */\n\trenderWithFunction(func: DataFunctionType, parameters?: unknown): void {\n\t\tthis.clearNetwork();\n\t\tthis.render(func, parameters);\n\t}\n\n\t/**\n\t * Execute an arbitrary Cypher query and update the current visualization, retaning current nodes\n\t * This function will not change the original query given by renderWithCypher or the inital cypher.\t\n\t * @param parameters - parameters to send to the cypher\n\t * \n\t */\n\tupdateWithCypher(query: Cypher, parameters?: unknown): void {\n\t\tthis.render(query, parameters);\n\t}\n\n\t/**\n\t * Execute an arbitrary function and update the visualization\n\t * @param func\n\t * @param parameters - parameters to send to the function\n\t */\n\tupdateWithFunction(func: DataFunctionType, parameters?: unknown): void {\n\t\tthis.render(func, parameters);\n\t}\n}\n\n/**\n * @deprecated for migration only\n */\nexport interface OldLabelConfig {\n\tcaption?: string | ((node: Neo4jTypes.Node) => string);\n\tsize?: number;\n\tcommunity?: string;\n\tsizeCypher?: string;\n\timage?: string;\n\tfont?: string | VisNetwork.Font;\n\ttitle_properties?: string[];\n}\n\n/**\n * @deprecated for migration only\n */\nexport interface OldRelationshipConfig {\n\tthickness?: number;\n\tcaption?: boolean | string;\n}\n\n/**\n * @deprecated for migration only\n */\nexport interface OldNeoVisConfig {\n\tcontainer_id: string;\n\tserver_url: string;\n\tserver_user: string;\n\tserver_password: string;\n\tserver_database: string;\n\tlabels?: {\n\t\t[label: string]: OldLabelConfig,\n\t\t[NEOVIS_DEFAULT_CONFIG]?: OldLabelConfig\n\t};\n\trelationships?: {\n\t\t[relationship: string]: OldRelationshipConfig,\n\t\t[NEOVIS_DEFAULT_CONFIG]?: OldRelationshipConfig\n\t};\n\tarrows?: boolean;\n\thierarchical?: boolean;\n\thierarchical_sort_method?: 'hubsize' | 'directed';\n\tinitial_cypher?: string;\n\tconsole_debug?: boolean;\n\tencrypted?: 'ENCRYPTION_OFF' | 'ENCRYPTION_ON';\n\ttrust?: 'TRUST_ALL_CERTIFICATES' | 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES';\n}\n\n/**\n * @deprecated will be removed in the future\n * migrate old config to the new one\n * @param oldNeoVisConfig 1.0.0 config object\n */\nexport function migrateFromOldConfig(oldNeoVisConfig: OldNeoVisConfig): NeovisConfig {\n\treturn {\n\t\tcontainerId: oldNeoVisConfig.container_id,\n\t\tinitialCypher: oldNeoVisConfig.initial_cypher,\n\t\tconsoleDebug: oldNeoVisConfig.console_debug,\n\t\tserverDatabase: oldNeoVisConfig.server_database,\n\t\tneo4j: {\n\t\t\tserverUrl: oldNeoVisConfig.server_url,\n\t\t\tserverUser: oldNeoVisConfig.server_user,\n\t\t\tserverPassword: oldNeoVisConfig.server_password,\n\t\t\tdriverConfig: oldNeoVisConfig.encrypted || oldNeoVisConfig.trust ? {\n\t\t\t\tencrypted: oldNeoVisConfig.encrypted,\n\t\t\t\ttrust: oldNeoVisConfig.trust\n\t\t\t} : undefined\n\t\t},\n\t\tvisConfig: oldNeoVisConfig.arrows || oldNeoVisConfig.hierarchical ? {\n\t\t\tedges: oldNeoVisConfig.arrows ? {\n\t\t\t\tarrows: {\n\t\t\t\t\tto: {\n\t\t\t\t\t\tenabled: oldNeoVisConfig.arrows\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} : undefined,\n\t\t\tlayout: oldNeoVisConfig.hierarchical ? {\n\t\t\t\tenabled: oldNeoVisConfig.hierarchical,\n\t\t\t\tsortMethod: oldNeoVisConfig.hierarchical_sort_method\n\t\t\t} : undefined\n\t\t} : undefined,\n\t\tlabels: oldNeoVisConfig.labels ? (Object.entries(oldNeoVisConfig.labels) as [string | typeof NEOVIS_DEFAULT_CONFIG, OldLabelConfig][])\n\t\t\t.concat(oldNeoVisConfig.labels?.[NEOVIS_DEFAULT_CONFIG] ? [[NEOVIS_DEFAULT_CONFIG, oldNeoVisConfig.labels[NEOVIS_DEFAULT_CONFIG]]] : [])\n\t\t\t.reduce((newLabelsConfig, [label, oldLabelConfig]) => {\n\t\t\t\tnewLabelsConfig[label] = {\n\t\t\t\t\tlabel: typeof oldLabelConfig.caption !== 'function' ? oldLabelConfig.caption : undefined,\n\t\t\t\t\tvalue: oldLabelConfig.size,\n\t\t\t\t\tgroup: oldLabelConfig.community,\n\t\t\t\t\t[NEOVIS_ADVANCED_CONFIG]: {\n\t\t\t\t\t\tcypher: oldLabelConfig.sizeCypher ? {\n\t\t\t\t\t\t\tvalue: oldLabelConfig.sizeCypher\n\t\t\t\t\t\t} : undefined,\n\t\t\t\t\t\tfunction: deepmerge({\n\t\t\t\t\t\t\ttitle: (props) => objectToTitleHtml(props, oldLabelConfig.title_properties)\n\t\t\t\t\t\t}, typeof oldLabelConfig.caption === 'function' ? { label: oldLabelConfig.caption } : {}),\n\t\t\t\t\t\tstatic: {\n\t\t\t\t\t\t\tfont: oldLabelConfig.font,\n\t\t\t\t\t\t\tshape: oldLabelConfig.image ? 'image' : 'dot',\n\t\t\t\t\t\t\timage: oldLabelConfig.image\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\treturn newLabelsConfig;\n\t\t\t}, {}) : undefined,\n\t\trelationships: oldNeoVisConfig.relationships ? (Object.entries(oldNeoVisConfig.relationships) as [string | typeof NEOVIS_DEFAULT_CONFIG, OldRelationshipConfig][])\n\t\t\t.concat(oldNeoVisConfig.relationships[NEOVIS_DEFAULT_CONFIG] ? [[NEOVIS_DEFAULT_CONFIG, oldNeoVisConfig.relationships[NEOVIS_DEFAULT_CONFIG]]] : [])\n\t\t\t.reduce((newLabelsConfig, [relationship, oldRelationshipsConfig]) => {\n\t\t\t\tnewLabelsConfig[relationship] = {\n\t\t\t\t\tvalue: oldRelationshipsConfig.thickness,\n\t\t\t\t\tlabel: typeof oldRelationshipsConfig.caption === 'string' ? oldRelationshipsConfig.caption : undefined,\n\t\t\t\t\t[NEOVIS_ADVANCED_CONFIG]: {\n\t\t\t\t\t\tfunction: {\n\t\t\t\t\t\t\ttitle: objectToTitleHtml\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\treturn newLabelsConfig;\n\t\t\t}, {}) : undefined\n\t};\n}\n\nexport default NeoVis;\n"],"names":["root","factory","exports","module","require","define","amd","undefined","self","__WEBPACK_EXTERNAL_MODULE__783__","__WEBPACK_EXTERNAL_MODULE__642__","__WEBPACK_EXTERNAL_MODULE__779__","__WEBPACK_EXTERNAL_MODULE__995__","__WEBPACK_EXTERNAL_MODULE__852__","__WEBPACK_EXTERNAL_MODULE__820__","__WEBPACK_EXTERNAL_MODULE__270__","__WEBPACK_EXTERNAL_MODULE__83__","__WEBPACK_EXTERNAL_MODULE__209__","__WEBPACK_EXTERNAL_MODULE__321__","__WEBPACK_EXTERNAL_MODULE__848__","__WEBPACK_EXTERNAL_MODULE__317__","__WEBPACK_EXTERNAL_MODULE__483__","__WEBPACK_EXTERNAL_MODULE__349__","__WEBPACK_EXTERNAL_MODULE__723__","__WEBPACK_EXTERNAL_MODULE__519__","__WEBPACK_EXTERNAL_MODULE__949__","__WEBPACK_EXTERNAL_MODULE__55__","__WEBPACK_EXTERNAL_MODULE__365__","__WEBPACK_EXTERNAL_MODULE__613__","__WEBPACK_EXTERNAL_MODULE__581__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","defaults","neo4j","initialQuery","neo4jUri","neo4jUser","neo4jPassword","driverConfig","encrypted","trust","maxConnectionPoolSize","connectionAcquisitionTimeout","disableLosslessIntegers","groupAsLabel","visJs","nodes","font","size","strokeWidth","scaling","edges","arrows","to","enabled","length","layout","improvedLayout","hierarchical","sortMethod","physics","adaptiveTimestep","stabilization","iterations","fit","NeoVisEvents","EventController","constructor","_defineProperty","this","_handlers","CompletionEvent","ErrorEvent","ClickNodeEvent","ClickEdgeEvent","register","eventType","handler","Error","push","generateEvent","values","NEOVIS_DEFAULT_CONFIG","_Symbol","NEOVIS_ADVANCED_CONFIG","_classPrivateMethodInitSpec","privateSet","_checkPrivateRedeclaration","add","_classPrivateFieldInitSpec","privateMap","set","privateCollection","has","TypeError","_classPrivateMethodGet","receiver","fn","toNeo4jInt","_ref","low","high","Neo4j","integerToNumber","integer","getHighBits","toInt","toString","bigIntToString","toBigInt","FakeTypeToType","keys","type","propertyToNormal","_Array$isArray","_mapInstanceProperty","_Object$keys","fakeType","isCorrectType","rets","_keysInstanceProperty","property","properyMapWithIdentity","properties","_context","_reduceInstanceProperty","_Object$entries","ret","_ref2","dumbToNeo4j","field","identity","labels","start","end","_context2","segments","segment","relationship","_flatMapInstanceProperty","_propertyToHtml","out","val","_retrieveProperty","useBigInt","arguments","isInt","objectToTitleHtml","neo4jObject","titleProperties","titleString","propVal","title","document","createElement","innerHTML","objectToTitleString","_data","_WeakMap","_network","_events","_config","_driver","_database","_query2","_container","_consoleLog","_WeakSet","_init","_runCypher","_runFunction","_buildStaticObject","_buildPropertyNameObject","_buildCypherObject","_buildFunctionObject","_buildVisObject","_buildNodeVisObject","_buildEdgeVisObject","_runFunctionDataGetter","_runNeo4jDataGetter","_createSingleRecord","_completeRun","NeoVis","_classPrivateFieldGet","network","config","writable","vis","_init2","_consoleLog2","render","query_or_function","parameters","dataFunction","_runFunctionDataGetter2","_runNeo4jDataGetter2","clearNetwork","clear","registerOnEvent","reinit","parameter","reload","stabilize","stopSimulation","renderWithCypher","query","_classPrivateFieldSet","renderWithFunction","func","updateWithCypher","updateWithFunction","message","level","consoleDebug","console","defaultLabelConfig","defaultRelationshipConfig","nonFlat","defaultRelationshipsConfig","relationships","deepmerge","serverUrl","serverUser","serverPassword","serverDatabase","initialCypher","getElementById","containerId","_runCypher2","cypher","id","session","database","results","result","readTransaction","tx","run","record","records","_forEachInstanceProperty","v","close","pop","_runFunction2","node","_buildStaticObject2","staticConfig","object","_buildPropertyNameObject2","propertyNameConfig","neo4jObj","_buildCypherObject2","cypherConfig","promise","_Promise","then","_buildFunctionObject2","functionConfig","_buildVisObject2","baseObject","propertyConfig","static","function","advancedConfig","_buildNodeVisObject2","neo4jNode","label","labelConfig","raw","group","_buildEdgeVisObject2","relationshipConfig","edge","from","recordCount","dataBuildPromises","_createSingleRecord2","error","_completeRun2","_query","subscribe","onNext","onCompleted","async","onError","fields","_fields","_fieldLookup","name","dataPromises","isNode","update","e","isRelationship","isPath","startNode","endNode","options","visConfig","container","_setTimeout","neoVis","on","params","nodeId","getNodeAt","pointer","DOM","edgeId","getEdgeAt","migrateFromOldConfig","oldNeoVisConfig","_context3","_context4","_context5","_context6","container_id","initial_cypher","console_debug","server_database","server_url","server_user","server_password","hierarchical_sort_method","_concatInstanceProperty","newLabelsConfig","_ref3","oldLabelConfig","caption","community","sizeCypher","props","title_properties","shape","image","_ref4","oldRelationshipsConfig","thickness"],"sourceRoot":""}